
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Translation &#8212; cc_licenses 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Project settings" href="settings.html" />

  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />


  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">

  <div class="section" id="translation">
<h1>Translation<a class="headerlink" href="#translation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<p>This project uses the standard <a class="reference external" href="https://docs.djangoproject.com/en/stable/topics/i18n/">Django translation mechanisms</a>.</p>
<p>We use <a class="reference external" href="https://www.transifex.com">Transifex</a> to make it easy for translators
to convert the English strings in our interface to proper translated strings in
other languages.</p>
</div>
<div class="section" id="what-goes-in-version-control">
<h2>What goes in version control?<a class="headerlink" href="#what-goes-in-version-control" title="Permalink to this headline">¶</a></h2>
<p>While the <code class="docutils literal notranslate"><span class="pre">.po</span></code> files can be regenerated easily by running <code class="docutils literal notranslate"><span class="pre">make</span>
<span class="pre">makemessages</span></code> again for English or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">pullmessages</span></code> for the translated
languages, we still store them in Git to make it easier to keep an eye on
changes, and revert if needed. That way we are less likely to accidentally make
a mistake and delete huge swaths of messages without noticing it.</p>
<p>We also store the <code class="docutils literal notranslate"><span class="pre">.mo</span></code> files in Git because those are what Django gets the
translated messages from at runtime.</p>
</div>
<div class="section" id="first-time-setup">
<h2>First time setup<a class="headerlink" href="#first-time-setup" title="Permalink to this headline">¶</a></h2>
<p>Steps 1 and 2 only need to be done once. Step 3 would only need to be repeated
if you were to add a new PO file to be translated. An example would be if you
were to add frontend JS translations.</p>
<ol class="arabic">
<li><p class="first">Create a project on Transifex. This documentation will assume that you named
it <code class="docutils literal notranslate"><span class="pre">cc_licenses</span></code>.</p>
</li>
<li><p class="first">In the repo, create your Transifex config file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tx</span> <span class="n">init</span>
</pre></div>
</div>
</li>
<li><p class="first">Tell Transifex where your files are, and how to link them to Transifex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tx</span> <span class="nb">set</span> <span class="o">--</span><span class="n">auto</span><span class="o">-</span><span class="n">local</span> <span class="o">-</span><span class="n">r</span> <span class="n">cc_licenses</span><span class="o">.</span><span class="n">djangopo</span> \
    <span class="s1">&#39;locale/&lt;lang&gt;/LC_MESSAGES/django.po&#39;</span> \
    <span class="o">--</span><span class="n">source</span><span class="o">-</span><span class="n">lang</span> <span class="n">en</span> <span class="o">--</span><span class="nb">type</span> <span class="n">PO</span> <span class="o">--</span><span class="n">execute</span>
</pre></div>
</div>
</li>
<li><p class="first">Commit this to the repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Setup Transifex translation&quot;</span> <span class="o">.</span><span class="n">tx</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="updating-messages-on-transifex">
<h2>Updating messages on Transifex<a class="headerlink" href="#updating-messages-on-transifex" title="Permalink to this headline">¶</a></h2>
<p>Anytime there have been changes to the messages in the code or templates,
a developer should update the messages on Transifex as follows:</p>
<ol class="arabic">
<li><p class="first">Make sure you have the latest code from develop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">develop</span>
<span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
</li>
<li><p class="first">regenerate the English (only) .po files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">makemessages</span>
</pre></div>
</div>
</li>
<li><p class="first">Run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> and make sure the changes look reasonable.</p>
</li>
<li><p class="first">If so, commit the updated .po file to develop and push it upstream:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Updated messages&quot;</span> <span class="n">locale</span><span class="o">/</span><span class="n">en</span><span class="o">/</span><span class="n">LC_MESSAGES</span><span class="o">/*.</span><span class="n">po</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference external" href="http://support.transifex.com/customer/portal/articles/996211-pushing-new-translations">Push</a>
the updated source file to Transifex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">pushmessages</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="updating-translations-from-transifex">
<h2>Updating translations from Transifex<a class="headerlink" href="#updating-translations-from-transifex" title="Permalink to this headline">¶</a></h2>
<p>Anytime translations on Transifex have been updated, someone should update our
translation files on the develop branch as follows:</p>
<ol class="arabic">
<li><p class="first">Make sure you have the latest code from develop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">develop</span>
<span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference external" href="http://support.transifex.com/customer/portal/articles/996157-getting-translations">Pull</a>
the updated .po files from Transifex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">pullmessages</span>
</pre></div>
</div>
</li>
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> to see if any translations have actually changed. If not,
you can stop here.</p>
</li>
<li><p class="first">Look at the diffs to see if the changes look reasonable. E.g. if translations
have vanished, figure out why before proceeding.</p>
</li>
<li><p class="first">Compile the messages to .mo files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">compilemessages</span>
</pre></div>
</div>
<p>If you get any errors due to badly formatted translations, open issues on
Transifex and work with the translators to get them fixed, then start this
process over.</p>
</li>
<li><p class="first">Run your test suite one more time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span>
</pre></div>
</div>
</li>
<li><p class="first">Commit and push the changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Updated translations&quot;</span> <span class="n">locale</span><span class="o">/*/</span><span class="n">LC_MESSAGES</span><span class="o">/*.</span><span class="n">po</span> <span class="n">locale</span><span class="o">/*/</span><span class="n">LC_MESSAGES</span><span class="o">/*.</span><span class="n">mo</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Translation</a><ul>
<li><a class="reference internal" href="#resources">Resources</a></li>
<li><a class="reference internal" href="#what-goes-in-version-control">What goes in version control?</a></li>
<li><a class="reference internal" href="#first-time-setup">First time setup</a></li>
<li><a class="reference internal" href="#updating-messages-on-transifex">Updating messages on Transifex</a></li>
<li><a class="reference internal" href="#updating-translations-from-transifex">Updating translations from Transifex</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Develop and deploy cc_licenses</a><ul>
      <li>Previous: <a href="settings.html" title="previous chapter">Project settings</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/dev/translation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, PROJECT_AUTHOR.

      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>

      |
      <a href="../_sources/dev/translation.rst.txt"
          rel="nofollow">Page source</a>
    </div>




  </body>
</html>
